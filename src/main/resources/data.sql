-- index should be like this, but H2 has an issue with this syntax:
-- CREATE UNIQUE INDEX ux_workflow_company_active
-- ON workflow (company_id)
-- WHERE active = true;

-- Companies
INSERT INTO company(id, name) VALUES
('00000000-0000-0000-0000-000000000001', 'Light');

-- Approvers
INSERT INTO approver(id, name, department, email, slack_handle, preferred_channel) VALUES
('00000000-0000-0000-0000-000000000011', 'Finance Team Member', 'FINANCE', 'finance.team@light.com', 'finance-team', 'SLACK'),
('00000000-0000-0000-0000-000000000012', 'Finance Manager', 'FINANCE', 'finance.manager@light.com', 'finance-manager', 'EMAIL'),
('00000000-0000-0000-0000-000000000013', 'CFO', 'FINANCE', 'cfo@light.com', 'cfo', 'SLACK'),
('00000000-0000-0000-0000-000000000014', 'CMO', 'MARKETING', 'cmo@light.com', 'cmo', 'EMAIL');

-- Workflows
INSERT INTO workflow(id, company_id, name, active, created_at) VALUES
('00000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001', 'Light Invoice Approval Workflow (Fig. 1)', TRUE, CURRENT_TIMESTAMP);

-- Rules
INSERT INTO rule(id, workflow_id, name, step_order) VALUES
('00000000-0000-0000-0000-000000000021', '00000000-0000-0000-0000-000000000010', 'A1 — Small invoice to finance team', 10),
('00000000-0000-0000-0000-000000000022', '00000000-0000-0000-0000-000000000010', 'A2 — Mid invoice, no manager approval needed', 20),
('00000000-0000-0000-0000-000000000023', '00000000-0000-0000-0000-000000000010', 'A3 — Mid invoice, manager approval required', 30),
('00000000-0000-0000-0000-000000000024', '00000000-0000-0000-0000-000000000010', 'B1 — Large non-marketing invoice to CFO', 40),
('00000000-0000-0000-0000-000000000025', '00000000-0000-0000-0000-000000000010', 'B2 — Large marketing invoice to CMO', 50);

-- Conditions
INSERT INTO conditions(id, rule_id, field, operator, condition_value) VALUES
('00000000-0000-0000-0000-000000000031', '00000000-0000-0000-0000-000000000021', 'amount', 'LTE', '5000.00'),
('00000000-0000-0000-0000-000000000032', '00000000-0000-0000-0000-000000000022', 'amount', 'GT', '5000.00'),
('00000000-0000-0000-0000-000000000033', '00000000-0000-0000-0000-000000000022', 'amount', 'LTE', '10000.00'),
('00000000-0000-0000-0000-000000000034', '00000000-0000-0000-0000-000000000022', 'requiresManagerApproval', 'EQ', 'false'),
('00000000-0000-0000-0000-000000000035', '00000000-0000-0000-0000-000000000023', 'amount', 'GT', '5000.00'),
('00000000-0000-0000-0000-000000000036', '00000000-0000-0000-0000-000000000023', 'amount', 'LTE', '10000.00'),
('00000000-0000-0000-0000-000000000037', '00000000-0000-0000-0000-000000000023', 'requiresManagerApproval', 'EQ', 'true'),
('00000000-0000-0000-0000-000000000038', '00000000-0000-0000-0000-000000000024', 'amount', 'GT', '10000.00'),
('00000000-0000-0000-0000-000000000039', '00000000-0000-0000-0000-000000000024', 'department', 'NEQ', 'Marketing'),
('00000000-0000-0000-0000-000000000040', '00000000-0000-0000-0000-000000000025', 'amount', 'GT', '10000.00'),
('00000000-0000-0000-0000-00000000003a', '00000000-0000-0000-0000-000000000025', 'department', 'EQ', 'Marketing');

-- Actions
INSERT INTO action(id, rule_id, action_type, approver_id) VALUES
('00000000-0000-0000-0000-000000000041', '00000000-0000-0000-0000-000000000021', 'CREATE_APPROVAL_REQUEST', '00000000-0000-0000-0000-000000000011'),
('00000000-0000-0000-0000-000000000042', '00000000-0000-0000-0000-000000000022', 'CREATE_APPROVAL_REQUEST', '00000000-0000-0000-0000-000000000011'),
('00000000-0000-0000-0000-000000000043', '00000000-0000-0000-0000-000000000023', 'CREATE_APPROVAL_REQUEST', '00000000-0000-0000-0000-000000000012'),
('00000000-0000-0000-0000-000000000044', '00000000-0000-0000-0000-000000000024', 'CREATE_APPROVAL_REQUEST', '00000000-0000-0000-0000-000000000013'),
('00000000-0000-0000-0000-000000000045', '00000000-0000-0000-0000-000000000025', 'CREATE_APPROVAL_REQUEST', '00000000-0000-0000-0000-000000000014');


